<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data understanding and preparation | Project in Data Analytics for Decision Making</title>
  <meta name="description" content="Chapter 2 Data understanding and preparation | Project in Data Analytics for Decision Making" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data understanding and preparation | Project in Data Analytics for Decision Making" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data understanding and preparation | Project in Data Analytics for Decision Making" />
  
  
  

<meta name="author" content="Manon Verjus and Yooby Gigandet" />


<meta name="date" content="2022-05-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="models.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">German Credit - Data analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-understanding-and-preparation.html"><a href="data-understanding-and-preparation.html"><i class="fa fa-check"></i><b>2</b> Data understanding and preparation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-understanding-and-preparation.html"><a href="data-understanding-and-preparation.html#dataset"><i class="fa fa-check"></i><b>2.1</b> Dataset</a></li>
<li class="chapter" data-level="2.2" data-path="data-understanding-and-preparation.html"><a href="data-understanding-and-preparation.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>2.2</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-understanding-and-preparation.html"><a href="data-understanding-and-preparation.html#inacurracies"><i class="fa fa-check"></i><b>2.2.1</b> Inacurracies</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-understanding-and-preparation.html"><a href="data-understanding-and-preparation.html#unbalanced-observations"><i class="fa fa-check"></i><b>2.2.2</b> Unbalanced observations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="models.html"><a href="models.html"><i class="fa fa-check"></i><b>3</b> Models</a>
<ul>
<li class="chapter" data-level="3.1" data-path="models.html"><a href="models.html#splitting-strategies-and-balancing"><i class="fa fa-check"></i><b>3.1</b> Splitting strategies and balancing</a></li>
<li class="chapter" data-level="3.2" data-path="models.html"><a href="models.html#k-nearest-neighbors-k-nn"><i class="fa fa-check"></i><b>3.2</b> K-Nearest Neighbors (K-NN)</a></li>
<li class="chapter" data-level="3.3" data-path="models.html"><a href="models.html#naive-bayes"><i class="fa fa-check"></i><b>3.3</b> Naive Bayes</a></li>
<li class="chapter" data-level="3.4" data-path="models.html"><a href="models.html#logistic-regression"><i class="fa fa-check"></i><b>3.4</b> Logistic Regression</a></li>
<li class="chapter" data-level="3.5" data-path="models.html"><a href="models.html#trees"><i class="fa fa-check"></i><b>3.5</b> Trees</a></li>
<li class="chapter" data-level="3.6" data-path="models.html"><a href="models.html#neural-network"><i class="fa fa-check"></i><b>3.6</b> Neural Network</a></li>
<li class="chapter" data-level="3.7" data-path="models.html"><a href="models.html#support-vector-machines"><i class="fa fa-check"></i><b>3.7</b> Support Vector Machines</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Project in Data Analytics for Decision Making</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-understanding-and-preparation" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Data understanding and preparation<a href="data-understanding-and-preparation.html#data-understanding-and-preparation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="dataset" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Dataset<a href="data-understanding-and-preparation.html#dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To create a model that will predict whether a client application represents a risk or not, we work on a dataset from our client containing data on 1000 past credit applications, described by the following variables:</p>
<ul>
<li><p><strong>CHK_ACCT</strong>: The checking account status of the applicant in Deutsche Mark (DM).</p></li>
<li><p><strong>DURATION</strong>: The duration of the credit in months.</p></li>
<li><p><strong>HISTORY</strong>: The credit history of the applicant.</p></li>
<li><p><strong>NEW_CAR</strong>: Purpose of the credit.</p></li>
<li><p><strong>USED_CAR</strong>: Purpose of the credit.</p></li>
<li><p><strong>FURNITURE</strong>: Purpose of the credit.</p></li>
<li><p><strong>RADIO/TV</strong>: Purpose of the credit.</p></li>
<li><p><strong>EDUCATION</strong>: Purpose of the credit.</p></li>
<li><p><strong>RETRAINING</strong>: Purpose of the credit.</p></li>
<li><p><strong>AMOUNT</strong>: The credit amount.</p></li>
<li><p><strong>SAV_ACCT</strong>: The average balance in savings account in Deutsche Mark (DM).</p></li>
<li><p><strong>EMPLOYMENT</strong>: If the applicant is employed and since how long.</p></li>
<li><p><strong>INSTALL_RATE</strong>: The installment rate as percentage of disposable income.</p></li>
<li><p><strong>MALE_DIV</strong>: If the applicant is male and divorced.</p></li>
<li><p><strong>MALE_SINGLE</strong>: If the applicant is male and single.</p></li>
<li><p><strong>MALE_MAR_or_WID</strong>: If the applicant is male, married or widowed.</p></li>
<li><p><strong>CO_APPLICANT</strong>: If the applicant has a co-applicant.</p></li>
<li><p><strong>GUARANTOR</strong>: If the applicant has a guarantor.</p></li>
<li><p><strong>PRESENT_RESIDENT</strong>: If the applicant is a resident and since how many years.</p></li>
<li><p><strong>REAL_ESTATE</strong>: If the applicant owns real estate.</p></li>
<li><p><strong>PROP-UNKN-NONE</strong>: If the applicant owns no property (or unknown).</p></li>
<li><p><strong>AGE</strong>: Age of the applicant.</p></li>
<li><p><strong>OTHER_INSTALL</strong>: If the applicant has other installment plan credit.</p></li>
<li><p><strong>RENT</strong>: If the applicant rents.</p></li>
<li><p><strong>OWN_RES</strong>: If the applicant owns residence.</p></li>
<li><p><strong>NUM_CREDITS</strong>: Number of existing credits of the applicant at our client bank.</p></li>
<li><p><strong>JOB</strong>: The nature of the applicant’s job.</p></li>
<li><p><strong>NUM_DEPENDENT</strong>: Number of people for whom liable to provide maintenance.</p></li>
<li><p><strong>TELEPHONE</strong>: If the applicant has a phone in his or her name.</p></li>
<li><p><strong>FOREIGN</strong>: If the applicant is a foreign worker.</p></li>
<li><p><strong>RESPONSE</strong>: If the credit application is rated as “Good” or “Bad”.</p></li>
</ul>
</div>
<div id="exploratory-data-analysis" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Exploratory Data Analysis<a href="data-understanding-and-preparation.html#exploratory-data-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this part, we thoroughly explore the dataset to get a better understanding.</p>
<div id="inacurracies" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Inacurracies<a href="data-understanding-and-preparation.html#inacurracies" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By doing an exploratory data analysis, we find some inaccuracies and in agreement with our client, we change them as follow:</p>
<ul>
<li>One observation of the variable “AGE”: 75 instead of 125 years old.</li>
<li>One observation of the variable “EDUCATION”: 1 instead of -1.</li>
<li>One observation of the variable “GUARANTOR”: 1 instead of 2.</li>
</ul>
<p>Then, we separated the database in 2 parts: the first part consider only the good clients, and the second part consider only the bad clients.</p>
</div>
<div id="unbalanced-observations" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Unbalanced observations<a href="data-understanding-and-preparation.html#unbalanced-observations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One interesting point is that the dataset is heavily unbalanced: 700 credit applications rated as good versus 300 credit applications rated as bad. We will need to balance the dataset for our modelling.</p>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-7-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>To have a better visualization of our variables. We did some boxplot which show the distribution of the data.</p>
<p>This first boxplot A shows that bad clients mostly asked for longer duration credit than good clients. This could be a raison why they received a refusal. The second boxplot B shows that the age of clients doesn not seem to be a key criteria but the amount of the credit (boxplot C) seems to be more important as most of the good clients asked for a smaller amount.</p>
<p>Then, we explored the distribution of the financial variables.</p>
<p>The first graph A present the situation with past credits. The behavior for good and bad clients is almost the same which does not allow us to make a clear difference. On the graph B we can see that most of the clients have small savings of even no savings at all. Most of the clients have already 1 or 2 credits at this bank. Almost none of them ask for a third or fourth credit.
On the histogram D we see that the amount of money on the account not so important. Indeed, most of the good client do not even have a checking account.</p>
<p>The graphs below displays fournitures and products owned by the clients.</p>
<p>Most of the time the credits are not very favorable to finance products. However, new cars are more appreciated by banks than used cars and radio/tv are more financed than furnitures.</p>
<p>As we can see on the graph before, most of the time, if the client ask a credit to pay education, the bank will refuse, even if the client is good. It is slightly the same for retraining. Most of the good client have a job for more than a year and are skilled employees.</p>
<pre><code>#&gt; $`1`
#&gt; 
#&gt; $`2`
#&gt; 
#&gt; attr(,&quot;class&quot;)
#&gt; [1] &quot;list&quot;      &quot;ggarrange&quot;</code></pre>
<p>The graph A presents the qualification of client depending of the duration stays in their home. This criteria does not seem to be really indicative even if the most good clients live in their place since more than 4 years. The installment rate does not seem to impact the qualification of the client neither as most of the good and bad clients are rated by 4 (see graph B). Owning a real estate is not the key to be perceived as a good client neither. As the graph C prove, a lot of good clients do not have any real estate. But at the opposite having no property is a bad situation in the case of asking for a credit.</p>
<p>The graphs show that most of the good clients own their residence and not rent but a guarantor is definitely not a must.</p>
<p>About the demographic data of an applicant, clients are generally not male and single and not foreign workers.</p>
<p>The population of clients basically do not have co-applicants and they do not have other installment plan neither for majority of them. The name’s telephone does not seem to be important as a lot of clients have and have not the telephone on their name. However, most of the clients are not liable to provide maintenance.</p>
<p>We can see below the mean of good clients and the mean of bad clients. It is important to keep in account that the sample of good clients is much higher than the number of bad clients.</p>
<p>The matrix below present the correlations between variables. To read in a easiest way, we separated the variables in categories. As before, the categories were created based on their area.
<img src="bookdownproj_files/figure-html/unnamed-chunk-25-1.png" width="70%" style="display: block; margin: auto;" /><img src="bookdownproj_files/figure-html/unnamed-chunk-25-2.png" width="70%" style="display: block; margin: auto;" /><img src="bookdownproj_files/figure-html/unnamed-chunk-25-3.png" width="70%" style="display: block; margin: auto;" /><img src="bookdownproj_files/figure-html/unnamed-chunk-25-4.png" width="70%" style="display: block; margin: auto;" /><img src="bookdownproj_files/figure-html/unnamed-chunk-25-5.png" width="70%" style="display: block; margin: auto;" /></p>
<p>The following part of the project is focus on defining a typical profile of a good client. The goal is to define an average good client based on the average of all the variables defined.</p>
<p>The lollipop plot below present the mean profile to be qualified as a good client. From these results, most of them ask for a new car, rent their flat but have real estate. The good client in average has a quite good amount of money and has a guarantor. These results are quite different than what we presented before.
<img src="bookdownproj_files/figure-html/unnamed-chunk-27-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>The following plot shows a selection of the most important variables of our dataframe.
The two main disadvantages of these methods are: The increasing overfitting risk when the number of observations is insufficient. The significant computation time when the number of variables is large.</p>
<p>The result below displays that we seem to have 6 relevant variables: checking the account, the duration of the credit asked, the history of previous credits, the savings, the amount of money owned by the applicant and the real estate owned.</p>
<pre><code>#&gt; Warning in train.default(x, y, weights = w, ...): You are trying to
#&gt; do regression and your outcome only has two possible values Are you
#&gt; trying to do classification? If so, use a 2 level factor as your
#&gt; outcome column.
#&gt; Warning in nominalTrainWorkflow(x = x, y = y, wts = weights, info
#&gt; = trainInfo, : There were missing values in resampled performance
#&gt; measures.
#&gt; rpart variable importance
#&gt; 
#&gt;   only 20 most important variables shown (out of 30)
#&gt; 
#&gt;                  Overall
#&gt; CHK_ACCT          0.1141
#&gt; DURATION          0.0803
#&gt; HISTORY           0.0767
#&gt; SAV_ACCT          0.0684
#&gt; AMOUNT            0.0516
#&gt; REAL_ESTATE       0.0343
#&gt; MALE_SINGLE       0.0000
#&gt; FURNITURE         0.0000
#&gt; NUM_DEPENDENTS    0.0000
#&gt; CO_APPLICANT      0.0000
#&gt; OTHER_INSTALL     0.0000
#&gt; INSTALL_RATE      0.0000
#&gt; PROP_UNKN_NONE    0.0000
#&gt; JOB               0.0000
#&gt; TELEPHONE         0.0000
#&gt; NUM_CREDITS       0.0000
#&gt; USED_CAR          0.0000
#&gt; MALE_MAR_or_WID   0.0000
#&gt; EMPLOYMENT        0.0000
#&gt; PRESENT_RESIDENT  0.0000</code></pre>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-28-1.png" width="70%" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="models.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ygigandet/PDADM/edit/master/02-Data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ygigandet/PDADM/blob/master/02-Data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
